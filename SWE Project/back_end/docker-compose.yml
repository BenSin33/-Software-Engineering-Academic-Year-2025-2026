version: '3.9'

services:
  # ğŸŒ API Gateway
  api_gateway:
    build: .
    container_name: api_gateway
    ports:
      - "5000:5000"
    command: ["node", "API_gateway/server.js"]
    volumes:
      - .:/app
    networks:
      - app-net
    depends_on:
      - auth_service
      - bus_service
      - route_service
      - student_service

  # ğŸ” Auth Service
  auth_service:
    build: .
    container_name: auth_service
    ports:
      - "5010:5010"
    command: ["node", "Services/auth_service/app.js"]
    environment:
      - PORT=5010
    volumes:
      - .:/app
    networks:
      - app-net

  # ğŸšŒ Bus Service
  bus_service:
    build: .
    container_name: bus_service
    ports:
      - "5011:5011"
    command: ["node", "Services/bus_service/app.js"]
    environment:
      - PORT=5011
    volumes:
      - .:/app
    networks:
      - app-net

  # ğŸ—ºï¸ Route Service
  route_service:
    build: .
    container_name: route_service
    ports:
      - "5003:5003"
    command: ["node", "Services/route_service/app.js"]
    environment:
      - PORT=5003
    volumes:
      - .:/app
    networks:
      - app-net

  # ğŸ“ Student Service
  student_service:
    build: .
    container_name: student_service
    ports:
      - "5004:5004"
    command: ["node", "Services/student_service/app.js"]
    environment:
      - PORT=5004
    volumes:
      - .:/app
    networks:
      - app-net

  # ğŸ‘¤ User Service
  user_service: 
    build: .
    container_name: user_service
    ports:
      - "5012:5012"
    command: ["node", "Services/user_service/app.js"]
    environment:
      - PORT=5012
    volumes:
      - .:/app
    networks:
      - app-net
      
networks:
  app-net:
    driver: bridge
