version: '3.9'

services:
  # ğŸŒ API Gateway (dÃ¹ng server.js)
  api_gateway:
    build: .
    container_name: api_gateway
    ports:
      - "5000:5000"
    command: ["node", "API_gateway/server.js"]
    volumes:
      - .:/app
    networks:
      - app-net
    depends_on:
      - auth_service
      - bus_service
      - route_service
      - student_service

  # ğŸ” Auth Service (dÃ¹ng app.js)
  auth_service:
    build: .
    container_name: auth_service
    ports:
      - "5010:5010"
    command: ["node", "Services/auth_service/app.js"]
    environment:
      - PORT=5010
    volumes:
      - .:/app
    networks:
      - app-net

  # ğŸšŒ Bus Service (dÃ¹ng app.js)
  bus_service:
    build: .
    container_name: bus_service
    ports:
      - "5011:5011"
    command: ["node", "Services/bus_service/app.js"]
    environment:
      - PORT=5002
    volumes:
      - .:/app
    networks:
      - app-net

  # ğŸ—ºï¸ Route Service (dÃ¹ng app.js)
  route_service:
    build: .
    container_name: route_service
    ports:
      - "5003:5003"
    command: ["node", "Services/route_service/app.js"]
    environment:
      - PORT=5003
    volumes:
      - .:/app
    networks:
      - app-net

  # ğŸ“ Student Service (dÃ¹ng app.js)
  student_service:
    build: .
    container_name: student_service
    ports:
      - "5004:5004"
    command: ["node", "Services/student_service/app.js"]
    environment:
      - PORT=5004
    volumes:
      - .:/app
    networks:
      - app-net

networks:
  app-net:
    driver: bridge
